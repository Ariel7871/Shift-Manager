{% extends 'base.html' %}
{% block content %}

<div class="schedule-container">
  <!-- Week Navigation -->
  <div class="week-navigation">
    {% for option in week_options %}
      <a href="{{ url_for('schedule', user_id=user['id'], week_index=option.index) }}" 
         class="week-pill {% if week_index == option.index %}active{% endif %}">
         <i class="fa-solid fa-calendar-week"></i>
         {{ option.label }}
      </a>
    {% endfor %}
  </div>

  <form method="POST">
    <div class="schedule-card">
      <div class="schedule-header">
        <h4 class="header-title">
          <i class="fa-solid fa-calendar me-2"></i>{{ header_text }}
        </h4>
      </div>
      
      <div class="schedule-body">
        <table class="schedule-table">
          <thead>
            <tr>
              <th>Day</th>
              <th class="text-center">Shift Type</th>
            </tr>
          </thead>
          <tbody>
            {% for day in days %}
            <tr>
              <td class="day-cell">{{ day }}</td>
              {% if day == "Sunday" %}
                <td class="text-center">
                  <div class="shift-badge">
                    <i class="fa-solid fa-sun"></i>
                    Morning Shift
                    <input type="hidden" name="{{ week }}_{{ day }}" value="Day">
                  </div>
                </td>
              {% else %}
                <td>
                  <div class="shift-options">
                    <!-- Day Shift -->
                    <input type="radio" 
                           class="btn-check" 
                           name="{{ week }}_{{ day }}" 
                           id="{{ week }}_{{ day }}_day" 
                           value="Day" 
                           {% if prefill.get(day)=='Day' %}checked{% endif %}>
                    <label class="shift-btn day" for="{{ week }}_{{ day }}_day">
                      <i class="fa-solid fa-sun"></i>
                      Day
                    </label>

                    <!-- Night Shift -->
                    <input type="radio" 
                           class="btn-check" 
                           name="{{ week }}_{{ day }}" 
                           id="{{ week }}_{{ day }}_night" 
                           value="Night" 
                           {% if prefill.get(day)=='Night' %}checked{% endif %}>
                    <label class="shift-btn night" for="{{ week }}_{{ day }}_night">
                      <i class="fa-solid fa-moon"></i>
                      Night
                    </label>

                    <!-- OOO -->
                    <input type="radio" 
                           class="btn-check" 
                           name="{{ week }}_{{ day }}" 
                           id="{{ week }}_{{ day }}_ooo" 
                           value="OOO" 
                           {% if prefill.get(day)=='OOO' %}checked{% endif %}>
                    <label class="shift-btn ooo" for="{{ week }}_{{ day }}_ooo">
                      <i class="fa-solid fa-ban"></i>
                      OOO
                    </label>
                  </div>
                </td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Submit Buttons -->
    <div class="schedule-footer">
      <button type="submit" name="action" value="move_next" class="submit-btn primary">
        <i class="fa-solid fa-paper-plane me-2"></i>Submit & Next Week
      </button>
      <button type="submit" name="action" value="only_this_week" class="submit-btn secondary">
        <i class="fa-solid fa-check me-2"></i>Submit Only
      </button>
    </div>
  </form>
</div>

{% endblock %}