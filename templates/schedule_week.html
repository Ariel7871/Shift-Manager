{% extends 'base.html' %}
{% block content %}

<!-- Week Choice Buttons -->
<div class="mb-4 text-center">
  {% for option in week_options %}
    <a href="{{ url_for('schedule', user_id=user['id'], week_index=option.index) }}" 
       class="btn btn-outline-primary {% if week_index == option.index %}active{% endif %} me-2">
       <i class="fa-solid fa-calendar-week me-1"></i> {{ option.label }}
    </a>
  {% endfor %}
</div>

<h2 class="mb-4 text-center">
  <i class="fa-solid fa-edit me-2"></i>{{ header_text }}
</h2>

<form method="POST">
  <div class="card shadow">
    <div class="card-header bg-info text-white">
      <h4 class="mb-0"><i class="fa-solid fa-calendar me-2"></i>Week of {{ week }}</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered align-middle">
        <thead class="table-light">
          <tr>
            <th>Day</th>
            <th class="text-center">Day</th>
            <th class="text-center">Night</th>
            <th class="text-center">OOO</th>
          </tr>
        </thead>
		<tbody>
		  {% for day in days %}
		  <tr>
			<td>{{ day }}</td>
			{% if day == "Sunday" %}
			  <td colspan="3" class="text-center">
				Sunday is always morning shift
				<input type="hidden" name="{{ week }}_{{ day }}" value="Day">
			  </td>
			{% else %}
			  <td class="text-center">
				<div class="btn-group" role="group" aria-label="Shift for {{ day }}">
				  <input type="radio" class="btn-check" name="{{ week }}_{{ day }}" id="{{ week }}_{{ day }}_day" value="Day" autocomplete="off" {% if prefill.get(day)=='Day' %}checked{% endif %}>
				  <label class="btn btn-primary" for="{{ week }}_{{ day }}_day">
					<i class="fa-solid fa-sun"></i>
				  </label>
				</div>
			  </td>
			  <td class="text-center">
				<div class="btn-group" role="group" aria-label="Shift for {{ day }}">
				  <input type="radio" class="btn-check" name="{{ week }}_{{ day }}" id="{{ week }}_{{ day }}_night" value="Night" autocomplete="off" {% if prefill.get(day)=='Night' %}checked{% endif %}>
				  <label class="btn btn-secondary" for="{{ week }}_{{ day }}_night">
					<i class="fa-solid fa-moon"></i>
				  </label>
				</div>
			  </td>
			  <td class="text-center">
				<div class="btn-group" role="group" aria-label="Shift for {{ day }}">
				  <input type="radio" class="btn-check" name="{{ week }}_{{ day }}" id="{{ week }}_{{ day }}_ooo" value="OOO" autocomplete="off" {% if prefill.get(day)=='OOO' %}checked{% endif %}>
				  <label class="btn btn-danger" for="{{ week }}_{{ day }}_ooo">
					<i class="fa-solid fa-user-times"></i>
				  </label>
				</div>
			  </td>
			{% endif %}
		  </tr>
		  {% endfor %}
		</tbody>
      </table>
    </div>
  </div>

  <!-- Two Separate Submit Buttons -->
  <div class="d-grid gap-3 mt-4">
    <!-- Blue button: Save current week and move to next week -->
    <button type="submit" name="action" value="move_next" class="btn btn-primary btn-lg">
      <i class="fa-solid fa-paper-plane me-2"></i>Submit and move to the next week
    </button>
    <!-- Green button: Save current week only -->
    <button type="submit" name="action" value="only_this_week" class="btn btn-success btn-lg">
      <i class="fa-solid fa-check me-2"></i>Submit only this week
    </button>
  </div>
</form>

{% endblock %}
